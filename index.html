<script src="https://netpie.io/microgear.js"></script>
<script>
  const APPID     = "Led8x8Mono";
  const APPKEY    = "8NH4EmFlB4qIRe9";
  const APPSECRET = "Za2VI7miO3Zq1PkXfLmXyzR06";
  const ALIAS = "myX";
  
  var dataS = [60,66,149,161,161,149,66,60];
  //a0b252c114d243e127f243g114h252i
  var dataW = [0,252,114,243,127,243,114,252];
  var sendTo = "";
    var microgear = Microgear.create({
        key: APPKEY,
        secret: APPSECRET,
        alias : ALIAS         /*  optional  */
    });
	
	
    microgear.on('message',function(topic,msg) {
        document.getElementById("data").innerHTML = msg;
		document.getElementById("data2").innerHTML = topic;
		//
		//str.indexOf("welcome")
		document.getElementById("data3").innerHTML = msg.substring(msg.indexOf(","), msg.indexOf("~"));
		//
		//microgear.chat(sendTo,dataS.toString()+","+ALIAS);
    });
	
	

    microgear.on('connected', function() {
       //microgear.setAlias('myX');    /* alias can be renamed anytime with this function */
        document.getElementById("data").innerHTML = "Now I am connected with netpie...";
        //setInterval(function() {
           // microgear.chat("Led8x8Mono","Hello from myself at "+Date.now());
      //});
    });

    microgear.on('present', function(event) {
        console.log(event);
    });

    microgear.on('absent', function(event) {
        console.log(event);
    });
	
	microgear.on("error", function(err) {
		console.log("Error: "+err);
		//document.getElementById("data3").innerHTML = "Error: "+err;
	});
    microgear.connect(APPID);
	
	//microgear.chat("Led8x8Mono","Hello from myself at "+Date.now());
	function myFunction() {
		//document.getElementById("field2").value = document.getElementById("field1").value;
		sendTo = document.getElementById('lolz').value;
		//microgear.chat(sendTo,"a"+dataW[0]+"b"+dataW[1]+"c"+dataW[2]+"d"+dataW[3]+"e"+dataW[4]+"f"+dataW[5]+"g"+dataW[6]+"h"+dataW[7]+"i"+ALIAS+"j");
		microgear.chat(sendTo,dataW.toString()+","+ALIAS);
    }
	function myFunction2() {
		//document.getElementById("field2").value = document.getElementById("field1").value;
		sendTo = document.getElementById('lolz').value;
		//microgear.chat(sendTo,"a"+dataS[0]+"b"+dataS[1]+"c"+dataS[2]+"d"+dataS[3]+"e"+dataS[4]+"f"+dataS[5]+"g"+dataS[6]+"h"+dataS[7]+"i"+ALIAS+"j");
		microgear.chat(sendTo,dataS.toString()+","+ALIAS);
		//{0,252,114,243,127,243,114,252}
		
		
    }

</script>

<div id="data">_____</div>
<button onclick="myFunction2()">send :)</button><button onclick="myFunction()">send :|</button>

<div id="data2">_____</div>
<input type="text"  value="Send to?" id="lolz"/>
<div id="data3"> </div>
